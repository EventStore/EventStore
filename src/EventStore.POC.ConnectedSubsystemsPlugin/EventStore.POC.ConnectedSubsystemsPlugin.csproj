<Project Sdk="Microsoft.NET.Sdk">
	<PropertyGroup>
		<GenerateAssemblyInfo>true</GenerateAssemblyInfo>
		<Nullable>enable</Nullable>
	</PropertyGroup>
	<ItemGroup>
		<ProjectReference Include="..\EventStore.Core\EventStore.Core.csproj" />
		<ProjectReference Include="..\EventStore.PluginHosting\EventStore.PluginHosting.csproj" />
		<ProjectReference Include="..\EventStore.POC.IO.Core\EventStore.POC.IO.Core.csproj" />
	</ItemGroup>
	<Target Name="PostBuild" AfterTargets="PostBuildEvent">
			<ItemGroup>
				<MySourceFiles Include="$(OutDir)\*.ConnectedSubsystemsPlugin.*" />
				<MySourceFiles Include="$(OutDir)\*.IO.Core.*" />
		</ItemGroup>
		<Copy SourceFiles="@(MySourceFiles)" DestinationFolder="..\..\EventStore\src\EventStore.ClusterNode\$(OutDir)\plugins\$(ProjectName)" />
	</Target>
	<Target Name="PublishPlugin" AfterTargets="Publish">
		<ItemGroup>
			<PluginOutputFiles Include="$(PublishDir)\LICENSE.md" />
			<PluginOutputFiles Include="$(PublishDir)\NOTICE.html" />
			<PluginOutputFiles Include="$(PublishDir)\EventStore.POC.ConnectedSubsystemsPlugin.deps.json" />
			<PluginOutputFiles Include="$(PublishDir)\EventStore.POC.ConnectedSubsystemsPlugin.dll" />
			<PluginOutputFiles Include="$(PublishDir)\EventStore.POC.IO.Core.dll" />
		</ItemGroup>
		<Copy SourceFiles="@(PluginOutputFiles)" DestinationFolder="$(PublishDir)/package" />
	</Target>
</Project>
